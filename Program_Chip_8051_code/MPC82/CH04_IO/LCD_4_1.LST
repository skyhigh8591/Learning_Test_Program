C51 COMPILER V9.56.0.0   LCD_4_1                                                           03/05/2020 20:31:33 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE LCD_4_1
OBJECT MODULE PLACED IN LCD_4_1.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE LCD_4_1.C OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /************** LCD1.C **********************************
   2          *以4 bits介面操作LCDM 
   3          ***********************************************/
   4          #include "..\MPC82.H"   //暫存器及組態定義
   5          void main(void)
   6          {
   7   1         unsigned char i;        //資料計數
   8   1         LCD_init();    //重置及清除LCD    
   9   1         LCD_Cmd(0x83); //游標由第一行第4個字開始顯示
  10   1          
  11   1         for(i='0'; i<= '9';i++)//字元0~9 
  12   1          {
  13   2           LCD_Data(i);  //字元送到LCD顯示   
  14   2        }
  15   1      
  16   1         LCD_Cmd(0xC0); //游標由第二行第1個字開始顯示   
  17   1         for(i='A'; i<= 'P';i++)//LCD顯示字元A~P 
  18   1          {
  19   2         LCD_Data(i);  //字元送到LCD顯示   
  20   2        }
  21   1      
  22   1        while(1)   //不停的循環執行
  23   1           {  //選擇以下其中功能來執行
  24   2           //LCD_Cmd(0x08); Delay_ms(500);//D=0關閉顯示器
  25   2             //LCD_Cmd(0x0c); Delay_ms(500);//D=1開啟顯示器
  26   2             //LCD_Cmd(0x1c); Delay_ms(100);//SC=1及RL=1顯示幕右移
  27   2             //LCD_Cmd(0x18); Delay_ms(100);//SC=1及RL=0顯示幕左移
  28   2           }  
  29   1      }
  30          /***********************************************************
  31          *函數名稱: LCD_Data
  32          *功能描述: 傳送資料到文字型LCD
  33          *輸入參數：dat
  34          ************************************************************/
  35          void EN_LCD(void)  //傳送到LCD
  36          {
  37   1        EN=1;
  38   1        Delay_ms(1);  
  39   1        EN=0;
  40   1      }
  41          /***********************************************************
  42          *函數名稱: LCD_Data
  43          *功能描述: 傳送資料到文字型LCD
  44          *輸入參數：dat
  45          ************************************************************/
  46          void LCD_Data(unsigned char dat)  //傳送資料到LCD
  47          {
  48   1        RS=1; RW=0; 
  49   1        Data=dat;   EN_LCD();   //資料送到BUS
  50   1        Data=dat <<4; EN_LCD();   //資料送到BUS
  51   1      }
  52          /***************************************************************
  53          *函數名稱: LCD_Cmd
  54          *功能描述: 傳送命令到文字型LCD
  55          *輸入參數：Cmd
C51 COMPILER V9.56.0.0   LCD_4_1                                                           03/05/2020 20:31:33 PAGE 2   

  56          ************************************************************/
  57          void LCD_Cmd(unsigned char Cmd) //傳送命令到LCD
  58          {
  59   1          RS=0;  RW=0;   
  60   1        Data=Cmd;   EN_LCD();       //命令送到BUS
  61   1        Data=Cmd<<4;  EN_LCD();      //命令送到BUS
  62   1      }
  63          
  64          /***************************************************************
  65          *函數名稱: LCD_init
  66          *功能描述: 啟始化文字型LCD
  67          *****************************************************************/
  68          void LCD_init(void)    //LCD的初始化程式  
  69          {
  70   1        Delay_ms(50);   //LCD電源on時，等待電源穩定時間>40ms 
  71   1          RS=0;  RW=0;   
  72   1      
  73   1        Data=0X20;  EN_LCD(); //功能設定：採用4-bits 資料介面模式
  74   1        LCD_Cmd(0x28);    //螢幕開啟，顯示2行字幕
  75   1        Delay_ms(1);    //等待LCDM內部運作時間>39us
  76   1      
  77   1        LCD_Cmd(0x0E);    //設定螢幕on，游標開啟，游標不閃爍
  78   1        Delay_ms(1);    //等待LCDM內部運作時間>39us
  79   1         
  80   1        LCD_Cmd(0x01);    //清除螢幕
  81   1        Delay_ms(2);    //等待LCDM內部運作時間>1.5ms
  82   1      
  83   1        LCD_Cmd(0x06);
  84   1        LCD_Cmd(0x02);
  85   1        Delay_ms(4);     //初始化完成等待時間>3.5ms
  86   1          
  87   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    228    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      7    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
