C51 COMPILER V9.03   PWM2                                                                  11/27/2011 15:35:06 PAGE 1   


C51 COMPILER V9.03, COMPILATION OF MODULE PWM2
OBJECT MODULE PLACED IN PWM2.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE PWM2.C OPTIMIZE(2,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********** PWM2.C *****Timer0輸出PWM波形********
   2          *動作：由接腳P12~5輸出4個PWM波形 
   3          *硬體：先SW1-4(P1LED)OFF量測電壓，再SW1-4(P1LED)ON觀察LED亮度
   4          *****************************************/
   5          #include "..\MPC82.H" 
   6          
   7          #define  PWM0_VAR 0x10  //PWM0設定輸出脈波寬度
   8          #define  PWM1_VAR 0x30  //PWM1設定輸出脈波寬度
   9          #define  PWM2_VAR 0x80  //PWM2設定輸出脈波寬度
  10          #define  PWM3_VAR 0xA0  //PWM3設定輸出脈波寬度
  11          
  12          sbit PWM0=0x92;  //PWM0=P12
  13          sbit PWM1=0x93;  //PWM1=P13
  14          sbit PWM2=0x94;  //PWM2=P14
  15          sbit PWM3=0x95;  //PWM3=P15
  16          
  17          main()
  18          {
  19   1        //AUXR2=T0X12;  //Timer0頻率=Fosc
  20   1        TMOD=0x02;    //設定Timer0為mode2內部計時
  21   1        TH0=TL0=0;    //Timer0由0開始計時   
  22   1        TR0=1;            //啟動Timer0開始計時
  23   1        while(1)      //週而覆始
  24   1         {
  25   2           PWM0=PWM1=PWM2=PWM3=1;      //PWM的開始準位=1
  26   2           while(TF0==0)      //若計時未溢位PWM輸出
  27   2               {
  28   3                if(TL0 > PWM0_VAR) PWM0=0;//若計時值 >PWM0值，PWM0=0
  29   3                if(TL0 > PWM1_VAR) PWM1=0;//若計時值 >PWM1值，PWM1=0
  30   3                if(TL0 > PWM2_VAR) PWM2=0;//若計時值 >PWM2值，PWM2=0
  31   3                if(TL0 > PWM3_VAR) PWM3=0;//若計時值 >PWM3值，PWM3=0
  32   3           }
  33   2               TF0=0; //若計時溢位，清除計時溢位旗標,重頭開始
  34   2         }
  35   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    110    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
