C51 COMPILER V9.56.0.0   MUSIC2A                                                           03/11/2020 11:23:45 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE MUSIC2A
OBJECT MODULE PLACED IN MUSIC2A.OBJ
COMPILER INVOKED BY: C:\Keil_v51\C51\BIN\C51.EXE MUSIC2A.C OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /********** MUSIC2A.c ****************************
   2          *動作：設定以Timer0計時中斷，令喇叭輸出各種音頻
   3          *硬體：SW2-5(SPK)ON
   4          ************************************************/
   5          #include "..\MPC82.H"   //暫存器及組態定義
   6          
   7          #include "music.h"  //音頻定義
   8          code unsigned int Table[] = // 虹彩妹妹
   9          {
  10            LA3, SO3, MI3, LA3, SO3, MI3,
  11            LA3, LA3, SO3, LA3,
  12            LA3, SO3, MI3, LA3, SO3, MI3,
  13            RE3, RE3, DO3, RE3,
  14            MI3, MI3, SO3, LA3, DO4, LA3, SO3,
  15            MI3, MI3, SO3, DO3,
  16            MI3, MI3, MI3, MI3, MI3,
  17            LA2, LA2, SO2, LA2,
  18          };
  19          
  20          code unsigned char Delay[] =   // 節拍延時,以4分音符為1拍
  21          {
  22            8, 4, 4, 8, 4, 4,    //32
  23            4, 4, 8, 16,       //32
  24            8, 4, 4, 8, 4, 4,    //32
  25            4, 4, 8, 16,       //32
  26            8, 4, 4, 4, 4, 4, 4, //32
  27            4, 8, 4, 16,     //32
  28            8, 8, 8, 4, 4,     //32
  29            4, 8, 4, 16      //32
  30          };
  31          char i;   //資料計數
  32          main()
  33          { 
  34   1       TMOD=0x01;   //設定Timer0為mode1內部計時 
  35   1       EA=1;ET0=1;  //致能Timer0中斷
  36   1       while (1)    //不斷循環執行
  37   1        {
  38   2         for(i=0; i<sizeof(Table)/2; i++)   //陣列計數由0~15遞加  
  39   2          {
  40   3           if(Table[i]==0) TR0=0; //若資料=0為停止Timer0計時
  41   3          else
  42   3          { 
  43   4           TL0=Table[i];TH0=Table[i] >>8; //設定計時值     
  44   4             TR0=1;            //啟動Timer0開始計時
  45   4          }
  46   3           Delay_ms(Delay[i]*50);     //音長 
  47   3          }
  48   2        }
  49   1      }
  50          /***************************************/
  51          void T0_int(void) interrupt 1  //Timer0中斷函數
  52          {
  53   1        TL0=Table[i] ; TH0=Table[i] >>8; //重新設定計時值
  54   1        SPEAK=!SPEAK;     //喇叭反相輸出
  55   1      }
C51 COMPILER V9.56.0.0   MUSIC2A                                                           03/11/2020 11:23:45 PAGE 2   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    316    ----
   CONSTANT SIZE    =    120    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
