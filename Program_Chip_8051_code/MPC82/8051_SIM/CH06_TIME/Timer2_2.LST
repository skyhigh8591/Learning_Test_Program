C51 COMPILER V8.10   TIMER2_2                                                              09/12/2009 16:22:53 PAGE 1   


C51 COMPILER V8.10, COMPILATION OF MODULE TIMER2_2
OBJECT MODULE PLACED IN Timer2_2.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Timer2_2.C OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********** Timer2_2.c *****************************
   2          *動作：設定Timer2為外部計數，
   3          *      由P12輸出脈波，送到T2(P10)腳作為外部計數，
   4          *      P12反相20次，輸入10個脈波後，才令LED遞加。
   5          *硬體：P12連接P10腳,SW1-3(P0LED)ON,SW1-4(P1LED)ON
   6          ************************************************/
   7          #include "..\MPC82.H"   //暫存器及組態定義
   8          #define T  10  //T0計數10次，設定輸入脈波數
   9          main()
  10          {
  11   1        unsigned char i=0;
  12   1        P0M0=0; P0M1=0xFF; //設定P0為推挽式輸出(M0-1=01)
  13   1        C_T2=1;            // C/T2=1外部計數
  14   1        RCAP2=T2R=65536-T; //設定Timer2及重新載入計數值
  15   1        TR2=1;             //啟動Timer2開始計數
  16   1        while (1)          //不斷循環執行
  17   1         {
  18   2           LED=~i++;     //LED遞加
  19   2           while(TF2==0)//等待外部計數10次，若TF2=0表示未溢位自我循環
  20   2            {
  21   3              P1_2=!P1_2;     //P12反相，送到T2(P10)
  22   3                  Delay_ms(500);         
  23   3            }
  24   2           TF2=0; //若計時溢位TF2=1，RCAP2自動重新載入T2，清除TF2=0
  25   2        }
  26   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     97    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
