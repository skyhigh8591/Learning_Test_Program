C51 COMPILER V8.10   PWM2                                                                  09/12/2009 10:17:24 PAGE 1   


C51 COMPILER V8.10, COMPILATION OF MODULE PWM2
OBJECT MODULE PLACED IN PWM2.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE PWM2.C OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********** PWM2.C ***********************
   2          *動作：使用Timer0輸出4個的PWM波形 
   3          *****************************************/
   4          #include "..\MPC82.H"   //暫存器及組態定義
   5          unsigned char PWM1_VAR=0x10;  //定義PWM1腳輸出脈波
   6          unsigned char PWM2_VAR=0x80;  //定義PWM2腳輸出脈波
   7          unsigned char PWM3_VAR=0xA0;  //定義PWM3腳輸出脈波
   8          unsigned char PWM4_VAR=0xF0;  //定義PWM4腳輸出脈波
   9          
  10          sbit PWM1=0x80;  //PWM1=P00
  11          sbit PWM2=0x81;  //PWM2=P01
  12          sbit PWM3=0x82;  //PWM3=P02
  13          sbit PWM4=0x83;  //PWM4=P03
  14          
  15          main()
  16          {
  17   1        TMOD=0x02;    //設定Timer0為mode2內部計時
  18   1        TH0=TL0=0;    //Timer0由0開始計時   
  19   1        TR0=1;            //啟動Timer0開始計時
  20   1        while(1)      //週而覆始
  21   1         {
  22   2           PWM1=PWM2=PWM3=PWM4=1;      //PWM的開始準位=1
  23   2           while(TF0==0)      //若計時未溢位PWM輸出
  24   2               {
  25   3                if(TL0 > PWM1_VAR) PWM1=0;//若計時值 >PWM1值，PWM1=0
  26   3                if(TL0 > PWM2_VAR) PWM2=0;//若計時值 >PWM2值，PWM2=0
  27   3                if(TL0 > PWM3_VAR) PWM3=0;//若計時值 >PWM3值，PWM3=0
  28   3                if(TL0 > PWM4_VAR) PWM4=0;//若計時值 >PWM4值，PWM4=0
  29   3           }
  30   2               TF0=0; //若計時溢位，清除計時溢位旗標,重頭開始
  31   2         }
  32   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    110    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
