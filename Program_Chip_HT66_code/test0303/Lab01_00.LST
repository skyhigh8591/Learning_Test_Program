"File: Lab01_00.asm  Assembler  Version 2.98      Page 1


   1  0000              ; PROGRAM : Lab01_00                       		By Steven                    
   2  0000              ; FUNCTION: LED SCANNING DEMO PROGRAM           2019.0305
   3  0000              ; 省略HT66F2390.inc定義檔之載入，說明其不方便性∼   		  
   4  0000              ;=================================================================================
   5  0000              MY_DATA    .SECTION		'DATA'          ;== DATA SECTION == 
   6  0000  00          DEL1    DB       ?                  	;DELAY LOOP COUNT 1 
   7  0001  00          DEL2    DB       ?                  	;DELAY LOOP COUNT 2 
   8  0002  00          DEL3	DB   	 ?        				;DELAY LOOP COUNT 3 
   9  0003              ;========================================================================================
  10  0000              MY_CODE    .SECTION		'CODE'     		;== PROGRAM SECTION == 
  11  0000                      ORG     00H                    	;HT66Fxx RESET VECTOR 
  12  0000              MAIN: 
  13  0000  0FAF        		MOV		A,0AFh					;DISABLE WDTC
  14  0001  00BE        		MOV		[3Eh],A
  15  0002  1F1C        		CLR		[1Ch]          			;CONFIG PC AS O/P MODE 
  16  0003  1F9B        		SET		[1Bh]           		;SET INITIAL LED STATE(off)
  17  0004              LOOP:             
  18  0004  019B        		CPL		[1Bh]        			;SHIFT RIGHT 
  19  0005  0F64        		MOV 	A,100         			;SET DELAY FACTOR 
  20  0006  2000     R  		CALL	DELAY               	;DELAY 100*1mS 
  21  0007  2800     R  		JMP		LOOP               		;REPEAT THE RIGHT PROCESS. 
  22  0008              ;========================================================================================
  23  0008              ; PROC	: DELAY
  24  0008              ; FUNC	: DEALY ABOUT ACC*1mS @fSYS=8MHz  (19966×Acc)+2 Cycles!
  25  0008              ; PARA	: ACC : DELAY FACTOR
  26  0008              ; REG	: DEL1,DEL2,DEL3
  27  0008              ;======================================================================================== 
  28  0008              DELAY  	PROC
  29  0008  0080     R  		MOV		DEL1,A					;SET DEL1 COUNTER	
  30  0009  0F03        DEL_1:  MOV		A,3		        	                   	
  31  000A  0080     R          MOV		DEL2,A					;SET DEL2 COUNTER 
  32  000B  0FDC        DEL_2:	MOV		A,220
  33  000C  0080     R  		MOV		DEL3,A					;SET DEL3 COUNTER
  34  000D  1780     R  DEL_3:  SDZ		DEL3                  	;DEL3 DOWN COUNT
  35  000E  2800     R          JMP		DEL_3                      
  36  000F  1780     R          SDZ		DEL2                  	;DEL2 DOWN COUNT
  37  0010  2800     R          JMP		DEL_2                   
  38  0011  1780     R  		SDZ		DEL1					;DEL1 DOWN COUNT
  39  0012  2800     R  		JMP		DEL_1
  40  0013  0003                RET
  41  0014              DELAY	ENDP


        0 Errors, 0 Warnings