C51 COMPILER V9.56.0.0   DOT16_2                                                           03/04/2020 11:45:44 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE DOT16_2
OBJECT MODULE PLACED IN DOT16_2.OBJ
COMPILER INVOKED BY: C:\Keil_v51\C51\BIN\C51.EXE DOT16_2.C OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /***** DOT16_2.C ***16*16彩色點矩陣字型範例******
   2          *動作：顯示四個不同彩色的16*16字型
   3          *接線：由Data(P0)輸出低電位字型資料，P10~3掃描輸出，
   4          *      P14選擇上半部紅色，P15選擇上半部綠色，
   5          *      P16選擇下半部紅色，P17選擇下半部綠色，
   6          *      P20第一字，P21第二字，P22第三字，P23第四字LED發亮
   7          ************************************************/
   8          #include "..\MPC82.H"  //暫存器及組態定義
   9          #include "font16_4.h"  //16*16中文字型
*** WARNING C323 IN LINE 1 OF font16_4.h: newline expected, extra characters found
*** ERROR C100 IN LINE 4 OF font16_4.h: unprintable character 0xCC skipped
*** ERROR C100 IN LINE 4 OF font16_4.h: unprintable character 0xCC skipped
*** ERROR C100 IN LINE 4 OF font16_4.h: unprintable character 0xCC skipped
*** ERROR C100 IN LINE 4 OF font16_4.h: unprintable character 0xCC skipped
*** ERROR C100 IN LINE 4 OF font16_4.h: unprintable character 0xCC skipped
*** ERROR C100 IN LINE 4 OF font16_4.h: unprintable character 0xCC skipped
*** ERROR C100 IN LINE 4 OF font16_4.h: unprintable character 0xCC skipped
*** ERROR C100 IN LINE 4 OF font16_4.h: unprintable character 0xCC skipped
*** ERROR C100 IN LINE 4 OF font16_4.h: unprintable character 0x80 skipped
  10          
  11          sfr  LED_CTR=0xa0;//LED_CTR=P2選擇矩陣LED字型
  12          sbit LED_R_U=P1^4;//LED_R_U=0->1資料送到上半部矩陣紅色LED
  13          sbit LED_G_U=P1^5;//LED_G_U=0->1資料送到上半部矩陣綠色LED
  14          sbit LED_R_D=P1^6;//LED_R_D=0->1資料送到下半部矩陣紅色LED
  15          sbit LED_G_D=P1^7;//LED_G_D=0->1資料送到下半部矩陣綠色LED
  16          
  17          main()
  18          {
  19   1        unsigned char repeat;  //定義重覆掃描次數
  20   1        unsigned char color=0; //定義彩色，0=紅色、1=綠色、2=黃色
  21   1        unsigned int i;       //定義資料計數  
  22   1       while(1)     
  23   1       {
  24   2         for(repeat=0;repeat<20;repeat++)   //重覆掃瞄次數
  25   2          {   
  26   3            for(i=0;i<127;i=i+2) //讀取四個字型資料分偶數及奇數
  27   3             {
  28   4             LED_CTR=0xff ;     //關閉所有矩陣LED
  29   4               if(color==0)       //若color=0(紅色)
  30   4              {    
  31   5                  Data=font16_4[i];     //取得中文字型的偶數資料輸出
  32   5                  LED_R_U=0; LED_R_U=1; //送到上半部的矩陣紅色LED
  33   5                
  34   5                  Data=font16_4[i+1];   //取得中文字型的奇數資料輸出
  35   5                  LED_R_D=0; LED_R_D=1; //送到下半部的矩陣紅色LED
  36   5                
  37   5              Data=0xff ;          //綠色暗             
  38   5            LED_G_U=0; LED_G_U=1;//令上半部的矩陣綠色LED暗
  39   5                  LED_G_D=0; LED_G_D=1;//令下半部的矩陣綠色LED暗
  40   5              }
  41   4             if(color==1)  //若color=1(綠色)
  42   4              {    
  43   5                  Data=font16_4[i];     //取得中文字型的偶數資料輸出
  44   5                  LED_G_U=0; LED_G_U=1; //令上半部的矩陣綠色LED亮
  45   5                
C51 COMPILER V9.56.0.0   DOT16_2                                                           03/04/2020 11:45:44 PAGE 2   

  46   5                  Data=font16_4[i+1];   //取得中文字型的奇數資料輸出
  47   5                  LED_G_D=0; LED_G_D=1; //令下半部的矩陣綠色LED亮
  48   5                
  49   5              Data=0xff ;          //紅色暗
  50   5                  LED_R_D=0; LED_R_D=1;//令下半部的矩陣紅色LED暗
  51   5                  LED_R_U=0; LED_R_U=1;//令上半部的矩陣紅色LED暗
  52   5              }
  53   4             if(color==2) //若color=2(黃色)
  54   4              {    
  55   5                  Data=font16_4[i];    //取得中文字型的偶數資料輸出
  56   5                  LED_R_U=0;LED_R_U=1; //令下半部的矩陣紅色LED亮
  57   5                  LED_G_U=0;LED_G_U=1; //令下半部的矩陣綠色LED亮  
  58   5            
  59   5              Data=font16_4[i+1];  //取得中文字型的奇數資料輸出
  60   5              LED_R_D=0;LED_R_D=1; //令上半部的矩陣紅色LED亮
  61   5                  LED_G_D=0;LED_G_D=1; //令上半部的矩陣綠色LED亮
  62   5              }
  63   4             P1=i/2+0xf0;      //資料計數/2，由P10~3掃描輸出
  64   4           if (i<=31)          LED_CTR=~(1<<0);//11111110若第一字型，P20=0  
  65   4           if (i>=32 && i<=63) LED_CTR=~(1<<1);//若第二字型，P21=0
  66   4           if (i>=64 && i<=95) LED_CTR=~(1<<2);//若第三字型，P22=0
  67   4           if (i>=96)          LED_CTR=~(1<<3);//若第四字型，P23=0 
  68   4            }
  69   3         }
  70   2        color++;  //換下一種彩色
  71   2        if(color > 2) color=0;//限制3種彩色    
  72   2       }
  73   1      }

C51 COMPILATION COMPLETE.  1 WARNING(S),  9 ERROR(S)
