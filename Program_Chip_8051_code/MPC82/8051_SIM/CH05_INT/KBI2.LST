C51 COMPILER V8.17   KBI2                                                                  02/19/2009 20:05:01 PAGE 1   


C51 COMPILER V8.17, COMPILATION OF MODULE KBI2
OBJECT MODULE PLACED IN KBI2.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE KBI2.C OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /************** KBI2.C *******Keypad中斷實習**********
   2          *動作：LED遞加，若P21-0=00，則按鍵中斷成立，清除LED1
   3          *硬體：SW1-4(P1LED),同時壓按鍵(0)~(1)，產生按鍵中斷，清除LED1
   4          ****************************************************/
   5          #include "..\MPC82.H"
   6           unsigned char i=0; //定義全域變數
   7          void main()
   8          {
   9   1        EA = 1;          //致能所有中斷
  10   1        AUXIE = EKBI;    //致能KBI中斷
  11   1        KBMASK = 0x03 ;  //選擇P21-0有按鍵中斷
  12   1      
  13   1        KBCON = PATNS;   //P2有比較功能
  14   1        KBPATN = 0x0C ;  //設定若同時P21-0=00，則中斷成立
  15   1      
  16   1        P2_4=0;   //選擇按鍵(0)~(1)
  17   1        while(1)
  18   1        {
  19   2          LED1=~i++;   //LED1遞加
  20   2          Delay_ms(100);
  21   2        }
  22   1      }
  23          //***********************************************
  24          void KBI_Interrupt() interrupt 13   //Keypad中斷函數    
  25          { 
  26   1        i=0; 
  27   1        LED1=~i;      //清除LED1          
  28   1        KBCON &= ~KBIF;  //清除按鍵中斷旗標KBIF=0
  29   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     95    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
