//
//
//   Display Chinese word "huan ying can guan" on Graphic LCD

//
#pragma oe db pw(80) SM SB CD
#include	<reg51.h>
#include "Delay.h"
sbit DI=P1 ^0 ;
sbit RW=P1 ^1 ;
sbit E=P1 ^2 ;
sbit CS1=P1^3 ;
sbit CS2=P1^4 ;
unsigned char code hwan[]={
//'huan' (font 1)
0x00,0x00,0x03,0x03,0x7F,0x03,0x03,0x22,
0x1F,0x18,0x18,0x18,0x1F,0x18,0x07,0x07,
0x04,0x0F,0x1C,0x3C,0x6F,0x8C,0x0C,0x0C,
0x0F,0x0C,0x0C,0x0C,0x0F,0x0C,0x0C,0x00,
0x00,0x00,0x8E,0x0C,0xFF,0x0C,0x0C,0xA0,
0xFF,0xD8,0xD8,0xD8,0xDF,0x90,0x18,0x1C,
0x31,0xFF,0x30,0x33,0xFF,0x30,0x30,0x33,
0xFF,0x30,0x30,0x31,0xFF,0x00,0x01,0x00,
0x00,0x00,0x07,0xC7,0xE4,0x04,0x0C,0x8C,
0xEF,0xC8,0xD0,0xD3,0xE3,0xE3,0x03,0x03,
0x83,0xC3,0x03,0x02,0x82,0x06,0x06,0x04,
0x8C,0x08,0x18,0xB0,0xE0,0xC0,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,
0xFE,0x08,0x18,0x90,0x10,0x20,0x00,0x00,
0x00,0x80,0x80,0x80,0x80,0x40,0x40,0x60,
0x20,0x30,0x18,0x1C,0x0E,0x07,0x00,0x00,
//'ying' (font 1)
0x00,0x00,0x10,0x0E,0x03,0x01,0x00,0x00,
0x60,0x18,0x0E,0x06,0x00,0x00,0x00,0x00,
0x03,0x7F,0x03,0x03,0x03,0x03,0x03,0x03,
0x03,0x02,0x0D,0x18,0x70,0x20,0x20,0x00,
0x00,0x00,0x00,0x21,0x1F,0x98,0x18,0x18,
0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,
0x18,0x98,0x18,0x18,0x1B,0x1E,0x78,0x70,
0x20,0x00,0x00,0xC0,0x3E,0x07,0x00,0x00,
0x00,0x00,0xC0,0xE8,0x0F,0x0C,0x0C,0x0C,
0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,
0x0C,0x0C,0x2C,0xCC,0x0C,0x0D,0x0C,0x0C,
0x0C,0x0C,0x0C,0x00,0x00,0xFF,0x00,0x00,
0x00,0x00,0x00,0x0E,0xFE,0x0C,0x0C,0x0C,
0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,
0x0C,0x0C,0x0C,0x0C,0x0C,0xFC,0x38,0x20,
0x00,0x00,0x00,0x00,0x3E,0xFC,0x00,0x00,
//'can' (font 1)
0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x07,
0x04,0x01,0x03,0x03,0x06,0x3F,0x3C,0x20,
0x00,0x00,0x03,0x0E,0x30,0x40,0x03,0x0C,
0x00,0x00,0x0F,0x00,0x00,0x00,0x1F,0x00,
0x00,0x04,0x07,0x0C,0x18,0x30,0xFF,0x80,
0x00,0x80,0xC0,0x31,0x1B,0xEF,0x0E,0x18,
0x30,0xC1,0x83,0x06,0x1C,0x70,0xC0,0x01,
0x0E,0x78,0xC0,0x00,0x03,0x3C,0xC0,0x00,
0x00,0x00,0x00,0x08,0x16,0x07,0xF9,0x00,
0x03,0x03,0x03,0x86,0xC4,0x7F,0x30,0x18,
0x86,0xE3,0x80,0x08,0x1E,0x38,0xE0,0x80,
0x01,0x07,0x1C,0x70,0x80,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xC0,
0x00,0x80,0x20,0x10,0x78,0x8C,0x08,0x00,
0x00,0x80,0xF0,0x3E,0x08,0x00,0x80,0xE0,
0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//'guan' (font 1)
0x00,0x00,0x07,0x07,0x06,0x7F,0x06,0x06,
0x31,0x3F,0x31,0x31,0x3F,0x31,0x04,0x07,
0x04,0x0C,0x1F,0x1C,0x2C,0x4F,0x0C,0x0C,
0x0F,0x0C,0x0C,0x0C,0x0F,0x0C,0x0C,0x00,
0x00,0x00,0x1C,0x1C,0x19,0xFF,0x18,0x10,
0xE3,0xFF,0xE3,0xE3,0xFF,0xE3,0x00,0x38,
0x20,0x26,0xFF,0x60,0x66,0xFF,0x60,0x66,
0xFF,0x60,0x60,0x63,0xFF,0x00,0x01,0x00,
0x00,0x00,0x40,0x3F,0x30,0xB0,0x30,0x30,
0x30,0xBF,0x30,0x30,0x30,0x30,0x3F,0x30,
0x30,0x30,0x30,0x3F,0x36,0x34,0x04,0x0C,
0x0C,0x08,0x18,0x30,0x20,0xC0,0x80,0x00,
0x00,0x00,0x08,0xFC,0x1C,0x18,0x18,0x18,
0x18,0xF8,0x18,0x18,0x18,0x18,0xF8,0x18,
0x18,0x18,0x18,0xF8,0xD8,0xD8,0xC0,0xC0,
0xC4,0xC4,0xC4,0xC4,0xC4,0xFE,0x00,0x00,
//'huan' (font 2)
0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,
0x0F,0x00,0x00,0x00,0x07,0x02,0x02,0x03,
0x01,0x01,0x03,0x03,0x05,0x09,0x31,0x01,
0x01,0x01,0x01,0x03,0x03,0x01,0x00,0x00,
0x00,0x00,0x00,0x06,0x07,0x86,0x87,0x87,
0xC4,0x44,0x81,0xFF,0x69,0x49,0xCF,0x00,
0x98,0x8B,0xFF,0x18,0x1F,0xF8,0x18,0x3F,
0xF8,0x18,0x7F,0xC0,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x06,0x06,0xC6,0x0E,
0x0C,0x0C,0x98,0xDF,0x94,0x30,0xA0,0x46,
0x06,0x06,0x04,0x06,0x0E,0x0D,0x09,0x18,
0x18,0x30,0xE0,0xC0,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0xE0,0xF8,0x70,0x60,0x80,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,
0xC0,0x60,0x78,0x3E,0x00,0x00,0x00,0x00,
//'ying' (font 2)
0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x03,
0x01,0x00,0x00,0x00,0x01,0x07,0x1F,0x01,
0x01,0x02,0x01,0x01,0x00,0x00,0x00,0x1F,
0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
0xC0,0xC7,0x06,0x06,0x06,0xC6,0xC6,0x86,
0x06,0x07,0x07,0x86,0xC4,0xC0,0x80,0xE0,
0x3C,0x07,0x01,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x30,0x38,0x70,0x60,
0xC0,0x01,0x0E,0x0C,0x0C,0x0C,0x0C,0x0C,
0x6D,0x8C,0x0C,0x0C,0x0C,0x0C,0x0C,0x08,
0x08,0xC8,0xFF,0x3F,0x0F,0x01,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0xF0,0x30,0x30,0x30,0x30,0x30,0x30,
0x30,0xE0,0xE0,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0xFE,0xFC,0xE0,0x00,0x00,0x00,
//'can' (font 2)
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x03,0x03,0x02,0x00,
0x00,0x00,0x00,0x00,0x01,0x03,0x0C,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x01,0x03,0x03,0x06,0x1F,0x1E,
0x60,0x60,0xCC,0x86,0xFE,0xC3,0x03,0x07,
0x0C,0x19,0x31,0x63,0x86,0x18,0x21,0x03,
0x06,0x18,0x01,0x03,0x0E,0x30,0xC0,0x00,
0x00,0x00,0x00,0x80,0x70,0x38,0xF8,0x30,
0x30,0x34,0x63,0xFF,0xF1,0x80,0x80,0xC0,
0x70,0x9C,0x8F,0x07,0x41,0xE0,0x80,0x30,
0x70,0xE0,0xC0,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,
0x00,0x00,0x80,0xFE,0xF8,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//'guan' (font 2)
0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x07,
0x3D,0x01,0x00,0x03,0x0C,0x09,0x0F,0x02,
0x03,0x03,0x06,0x0C,0x1F,0x36,0x47,0x06,
0x06,0x07,0x07,0x06,0x06,0x06,0x00,0x00,
0x00,0x00,0x00,0x08,0x0C,0x08,0x1B,0x1E,
0x10,0x20,0x2F,0xD3,0x92,0x9F,0x40,0x30,
0x37,0xFC,0x30,0x3E,0xF0,0x30,0xFE,0x30,
0x3F,0xFF,0x01,0x03,0x04,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,
0x7E,0x60,0x60,0x4F,0x78,0x40,0x43,0x7F,
0x40,0x40,0x7F,0x57,0x5B,0x32,0x32,0x62,
0x62,0xC2,0x82,0x02,0x03,0x01,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,
0xE0,0xE0,0xC0,0xC0,0xC0,0x40,0x40,0xC0,
0x40,0x40,0xC0,0x40,0x00,0x00,0x00,0x00,
0x04,0x04,0x06,0x06,0xFE,0xFC,0x00,0x00,

} ;
void delay5ms()
{
	char i=0 ;
	for(i=0 ; i < 5 ; i++) Delay1ms();
}
void waitlcd()
{
	unsigned char status;

	P0=0xff ; // P0 set to input port
	do{
	    DI=0;RW=1;E=1;
	    status= P0 ;
	    E=0 ;
	}
	while(status&0x80) ; // wait until BF=0

}
void Command(cmd){
	P0=cmd ;
	DI=0 ;RW=0; E=1;E=0 ; RW=1 ;
	waitlcd() ;
}
void Data(char data1){
	P0=data1;
	DI=1 ;RW=0; E=1;E=0 ;RW=1 ;
	waitlcd() ;
}
void FillHWAN(unsigned int pidx)
{
	char i ,page,y;

	for(y=0 ; y < 64 ; y+=32){
	    for(page=7 ; page >= 0 ; page--){
		Command(0xb8+page) ; // X addr  ;
		Command(0x40+y) ;    // Y Addr ;
		for(i=0; i< 32  ;i++){
		    Data(hwan[pidx++]);
		}
	    }
	}
}
main()
{

	CS1=CS2=1 ;
	delay5ms() ;       // wait for LCD Power-on Ready
	Command(0x3f) ;    // DISPLAY ON

	CS1=1; CS2=0 ;
	FillHWAN(0) ;
	CS1=0 ; CS2=1 ;
	FillHWAN(128*4) ;
	for(;;) ;
}
