C51 COMPILER V8.17   MUSIC2                                                                09/05/2009 16:19:34 PAGE 1   


C51 COMPILER V8.17, COMPILATION OF MODULE MUSIC2
OBJECT MODULE PLACED IN MUSIC2.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE MUSIC2.C OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********** music2.c ****************************
   2          *動作：設定以Timer0計時中斷，令喇叭輸出各種音頻
   3          *硬體：SW2-5(SPK)ON
   4          ************************************************/
   5          #include "..\MPC82.H"   //暫存器及組態定義
   6          
   7          #include "music.h"  //音頻定義
   8          unsigned int  code Table[]  //定義音頻陣列資料,0為休止符  
   9             ={DO3,0,RE3,0,MI3,0,FA3,0,SO3,0,LA3,0,SI3,0,DO4,0};
  10          char i;   //資料計數
  11          main()
  12          { 
  13   1       TMOD=0x01;   //設定Timer0為mode1內部計時 
  14   1       EA=1;ET0=1;  //致能Timer0中斷
  15   1       while (1)    //不斷循環執行
  16   1        {
  17   2         for(i=0; i<16; i++)   //陣列計數由0~15遞加  
  18   2          {
  19   3           if(Table[i]==0) TR0=0; //若資料=0為停止Timer0計時
  20   3                else
  21   3                {     
  22   4                 TL0=Table[i];TH0=Table[i] >>8; //設定計時值     
  23   4             TR0=1;            //啟動Timer0開始計時
  24   4                }
  25   3           Delay_ms(1000);     //音長 
  26   3           TR0=0;              //停止Timer0計時 
  27   3          }
  28   2        }
  29   1      }
  30          /***************************************/
  31          void T0_int(void) interrupt 1  //Timer0中斷函數
  32          {
  33   1        TL0=Table[i] ; TH0=Table[i] >>8; //重新設定計時值
  34   1        SPEAK=!SPEAK;     //喇叭反相輸出
  35   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    293    ----
   CONSTANT SIZE    =     32    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
