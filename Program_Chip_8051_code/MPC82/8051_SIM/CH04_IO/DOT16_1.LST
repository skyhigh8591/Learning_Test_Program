C51 COMPILER V9.56.0.0   DOT16_1                                                           03/04/2020 11:23:57 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE DOT16_1
OBJECT MODULE PLACED IN DOT16_1.OBJ
COMPILER INVOKED BY: C:\Keil_v51\C51\BIN\C51.EXE DOT16_1.C OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /***** DOT16_1.C ***16*16彩色點矩陣字型範例******
   2          *動作：輸出陣列字型資料，顯示不同彩色的16*16字型
   3          *接線：由Data(P0)輸出低電位字型資料，P10~3掃描輸出，
   4          *      P14選擇上半部紅色，P15選擇上半部綠色，
   5          *      P16選擇下半部紅色，P17選擇下半部綠色，
   6          *      P20致能LED發亮
   7          ************************************************/
   8          #include "..\MPC82.H"  //暫存器及組態定義
   9          #include "font16.h"  //16*16中文字型
  10          
  11          sbit LED_CTR=P2^0;//LED_CTR=1關閉所有矩陣LED
  12          sbit LED_R_U=P1^4;//LED_R_U=0->1資料送到上半部矩陣紅色LED
  13          sbit LED_G_U=P1^5;//LED_G_U=0->1資料送到上半部矩陣綠色LED
  14          sbit LED_R_D=P1^6;//LED_R_D=0->1資料送到下半部矩陣紅色LED
  15          sbit LED_G_D=P1^7;//LED_G_D=0->1資料送到下半部矩陣綠色LED
  16          
  17          main()
  18          {
  19   1        unsigned char repeat;  //定義重覆掃描次數
  20   1        unsigned char color=0; //定義彩色，0=紅色、1=綠色、2=黃色
  21   1        unsigned char i;       //定義資料計數  
  22   1       while(1)     
  23   1       {
  24   2         for(repeat=0;repeat<200;repeat++)   //重覆掃瞄次數
  25   2          {   
  26   3            for(i=0;i<32;i=i+2)  //讀取16筆資料掃瞄16次
  27   3             {
  28   4               LED_CTR=1 ;     //關閉所有矩陣LED
  29   4               if(color==0) //若color=0(紅色)
  30   4             {    
  31   5                  Data=font16[i];     //取得中文字型的偶數資料輸出
  32   5                  LED_R_U=0; LED_R_U=1; //送到上半部的矩陣紅色LED
  33   5                
  34   5                  Data=font16[i+1];    //取得中文字型的奇數資料輸出
  35   5                  LED_R_D=0; LED_R_D=1; //送到下半部的矩陣紅色LED
  36   5                
  37   5            Data=0xff ;     //綠色暗            
  38   5            LED_G_U=0; LED_G_U=1;//令上半部的矩陣綠色LED暗
  39   5                  LED_G_D=0; LED_G_D=1;//令下半部的矩陣綠色LED暗
  40   5            
  41   5        }
  42   4            if(color==1) //若color=1(綠色)
  43   4        {    
  44   5                  Data=font16[i];     //取得中文字型的偶數資料輸出
  45   5                  LED_G_U=0; LED_G_U=1; //令上半部的矩陣綠色LED亮
  46   5                
  47   5                  Data=font16[i+1];   //取得中文字型的奇數資料輸出
  48   5                  LED_G_D=0; LED_G_D=1; //令下半部的矩陣綠色LED亮
  49   5                
  50   5              Data=0xff ;     //紅色暗
  51   5                  LED_R_D=0; LED_R_D=1;//令下半部的矩陣紅色LED暗
  52   5                  LED_R_U=0; LED_R_U=1;//令上半部的矩陣紅色LED暗
  53   5        }
  54   4            if(color==2) //若color=2(黃色)
  55   4              {    
C51 COMPILER V9.56.0.0   DOT16_1                                                           03/04/2020 11:23:57 PAGE 2   

  56   5                  Data=font16[i];      //取得中文字型的偶數資料輸出
  57   5                  LED_R_U=0;LED_R_U=1; //令上半部的矩陣紅色LED亮
  58   5                  LED_G_U=0;LED_G_U=1; //令上半部的矩陣綠色LED亮  
  59   5            
  60   5              Data=font16[i+1];    //取得中文字型的奇數資料輸出
  61   5              LED_R_D=0;LED_R_D=1; //令下半部的矩陣紅色LED亮
  62   5                  LED_G_D=0;LED_G_D=1; //令下半部的矩陣綠色LED亮
  63   5                }
  64   4              P1=i/2+0xf0;  //資料計數/2為0~15，由P10~3掃描輸出
  65   4              LED_CTR=0 ;   //啟動矩陣LED，開始掃瞄輸出 
  66   4              Delay_ms(1);
  67   4            }
  68   3         }
  69   2        color++;  //換下一種彩色
  70   2        if(color > 2) color=0;//限制3種彩色    
  71   2       }
  72   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    256    ----
   CONSTANT SIZE    =     32    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      7    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
