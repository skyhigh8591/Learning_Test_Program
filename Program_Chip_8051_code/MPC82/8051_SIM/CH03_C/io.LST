C51 COMPILER V8.16   IO                                                                    12/01/2008 07:32:49 PAGE 1   


C51 COMPILER V8.16, COMPILATION OF MODULE IO
OBJECT MODULE PLACED IN .\IO.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\IO.C OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND OBJECT(.\IO.obj)

line level    source

   1          #include "MPC82.H"   //暫存器及組態定義
   2          /*******************************************
   3          *函數名稱: Delay_ms
   4          *功能描述: 延時以1mS為單位，石英晶體為12MHz
   5          *********************************************/
   6          void Delay_ms(unsigned int dly) 
   7          {  
   8   1        unsigned int dly1; //內循環變數
   9   1        while(dly--)         // 外循環，遞減至0
  10   1         { dly1=500;  while(dly1--);} //內循環，延時1ms
  11   1      }
  12          /*******************************************
  13          *函數名稱: Delay_ms
  14          *功能描述: 延時以1mS為單位，石英晶體為12MHz
  15          *********************************************/
  16          void Delay_10us(unsigned int dly) 
  17          {  
  18   1        unsigned int dly1; //內循環變數
  19   1        while(dly--)         // 外循環，遞減至0
  20   1         { dly1=500;  while(dly1--);} //內循環，延時1ms
  21   1      }
  22          /***********************************************************
  23          *函數名稱: LCD_Data
  24          *功能描述: 傳送資料到文字型LCD
  25          *輸入參數：dat
  26          ************************************************************/
  27          void LCD_Data(char dat)  //傳送資料到LCD
  28          {
  29   1          Data=dat; //資料送到BUS
  30   1          RS=1;RW=0;EN=1;//資料寫入到LCD內
  31   1          Delay_ms(1);   //LCD等待寫入完成
  32   1          EN=0;          //禁能LCD    
  33   1      }
  34          /***************************************************************
  35          *函數名稱: LCD_Cmd
  36          *功能描述: 傳送命令到文字型LCD
  37          *輸入參數：Cmd
  38          ************************************************************/
  39          void LCD_Cmd(unsigned char Cmd) //傳送命令到LCD
  40          {
  41   1          Data=Cmd;  //命令送到BUS
  42   1          RS=0;RW=0;EN=1; //命令寫入到LCD內
  43   1          Delay_ms(1);    //LCD等待寫入完成     
  44   1          EN=0;           //禁能LCD
  45   1      }
  46          /***************************************************************
  47          *函數名稱: LCD_init
  48          *功能描述: 啟始化文字型LCD
  49          *****************************************************************/
  50          void LCD_init(void)    //LCD的啟始程式  
  51          {
  52   1          LCD_Cmd(0x38);//0011 1000,8bit傳輸,顯示2行,5*7字型
  53   1          LCD_Cmd(0x38);//bit4:DL=1,8bit傳輸,
  54   1          LCD_Cmd(0x38);//bit3:N=1,顯示2行
  55   1                        //bit2:F=0,5*7字型    
C51 COMPILER V8.16   IO                                                                    12/01/2008 07:32:49 PAGE 2   

  56   1          LCD_Cmd(0x0c);/*0000 1100,顯示幕ON,不顯示游標,游標不閃爍
  57   1                          bit2:D=1,顯示幕ON
  58   1                          bit1:C=0,不顯示游標
  59   1                              bit0:B=0,游標不閃爍*/
  60   1          LCD_Cmd(0x06);/*0000 0110,//顯示完游標右移,游標移位禁能 
  61   1                          bit1:I/D=1,顯示完游標右移,
  62   1                          bit0:S=0,游標移位禁能*/  
  63   1          LCD_Cmd(0x01); //清除顯示幕  
  64   1          LCD_Cmd(0x02); //游標回原位  
  65   1      }
  66          /*******************************************
  67          *函數名稱: GLCD_Cmd
  68          *功能描述: 寫入命令到繪圖型LCD
  69          *輸入參數：cmd
  70          *********************************************/
  71          void GLCD_Cmd(unsigned char cmd)
  72          {
  73   1              Data=cmd;       //輸出命令      
  74   1              DI=0;EN=1;      //寫入命令
  75   1          Delay_ms(10);EN=0;  //等待寫入完成  
  76   1      }
  77          /********************************************
  78          *函數名稱: GLCD_Data
  79          *功能描述: 寫入資料到繪圖型LCD
  80          *輸入參數：dat
  81          *********************************************/
  82          void GLCD_Data(char dat)
  83          {
  84   1              Data=dat;        //輸出資料
  85   1              DI=1;EN=1;      //寫入資料
  86   1          Delay_ms(10);EN=0;  //等待寫入完成  
  87   1      }  


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    206    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     12    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
