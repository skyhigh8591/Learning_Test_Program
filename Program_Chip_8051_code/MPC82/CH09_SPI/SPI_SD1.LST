C51 COMPILER V9.03   SPI_SD1                                                               11/27/2011 14:06:57 PAGE 1   


C51 COMPILER V9.03, COMPILATION OF MODULE SPI_SD1
OBJECT MODULE PLACED IN SPI_SD1.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE SPI_SD1.C BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********SPI_SD1.C***********SD記憶卡存取範例*****************
   2          *功能︰將陣列資料寫入緩衝器，再藉由SPI界面寫入SD記憶卡內，
   3          *      再讀取SD記憶卡內容存入緩衝器，逐一在LED輸出。
   4          *附加：SD.LIB或SD.C
   5          *硬體：SW1-3(P0LED)ON，將SD卡插入J29
   6          **********************************************************/
   7          #include "..\MPC82.H"
   8          #include "SD.H"
   9          #include "TABLE8.H"      //256-byte陣列資料
  10          unsigned char xdata buffer[512] = {0}; //在擴充RAM宣告緩衝器
  11          
  12          void main( void )
  13          {
  14   1        int i;          //計數值
  15   1        P0M0=0; P0M1=0xFF; //設定P0為推挽式輸出(M0-1=01)
  16   1        initSD(); //初始化SD卡
  17   1        //for(i=0;i<256;i++) buffer[i]=TABLE[i];  //將陣列資料寫入in緩衝器
  18   1        
  19   1        //SDWriteBlock(1, buffer);    //緩衝器寫入SD記憶區塊1
  20   1        //for (i=0;i<256;i++) buffer[i]=0xff;//填滿緩衝器
  21   1      
  22   1        SDReadBlock(1, buffer);       //讀取SD記憶區塊1的內容到緩衝器
  23   1       
  24   1        while (1)  //緩衝器的內容重覆由LED輸出
  25   1         {
  26   2          for (i = 0; i < 256; i++) 
  27   2           {
  28   3                 LED=~buffer[i];//緩衝器的內容送到LED顯示
  29   3             Delay_ms(100); //延時
  30   3               }
  31   2         }
  32   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     96    ----
   CONSTANT SIZE    =    256    ----
   XDATA SIZE       =    512    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
