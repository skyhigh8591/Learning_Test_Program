C51 COMPILER V8.17   6_4                                                                   09/05/2009 15:32:17 PAGE 1   


C51 COMPILER V8.17, COMPILATION OF MODULE 6_4
OBJECT MODULE PLACED IN 6_4.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE 6_4.C OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*************** 6_4.c ****************************
   2          *動作：設定Timer1為mode1及外部計數，
   3          *      由P10輸出脈波，送到T1(P35)腳作為外部計數，
   4          *      P10反相20次，輸入10個脈波後，才令LED遞加。
   5          *硬體：P10連接P35腳，SW1-3(P0LED)ON，SW1-4(P1LED)ON
   6          ***************************************************/
   7          #include "..\MPC82.H"   //暫存器及組態定義
   8          #define T  10  //T0計數10次，設定輸入脈波數
   9          main()
  10          {
  11   1         unsigned char i=0;
  12   1         P0M0=0; P0M1=0xFF; //設定P0為推挽式輸出(M0-1=01)
  13   1         TMOD=0x50; /*0101 0000,設定Timer1為mode1外部計數
  14   1                      bit7:GATE=0,不使用INT1腳啟動計時
  15   1                                  bit6:C/T=1,外部計數
  16   1                                  bit5-4:MODE=01，mode1 */
  17   1        while(1)   //不斷循環執行
  18   1         {
  19   2            LED=~i++;  //令LED遞加
  20   2                TL1=65536-T;      //將低8位元計數值存入TL1
  21   2            TH1=(65536-T)>>8; //將高8位元計數值存入TH1
  22   2            TR1=1;            //啟動Timer1
  23   2            while(TF1==0)       //若TF1=0，等待P10反相20次，令計數溢位
  24   2            {
  25   3                    P1_0=!P1_0; //P10反相 ，送到T1(P35)
  26   3                    Delay_ms(500);
  27   3                 }
  28   2           TF1=0;  //若計數溢位TF1=1，清除TF1=0 
  29   2        }
  30   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     92    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
