Intel-8051 Macro Assembler - Version 1.00

      1    0000                           ;
      2    0000                           ; 配合"32個LED(共陰)實習板"
      3    0000                           ;    P0所接的8個LED當二進制計數器,P1所接的8個LED依序亮熄著,並交互變化,
      4    0000                           ;     P2所接的8個LED只有一LED亮著,並進行左旋的變化
      5    0000                           ;     P3所接的8個LED只有一LED亮著,並進行右旋的變化
      6    0000                           ;
      7    0000                           START:
      8    0000     75 80 00              	MOV	P0,#0
      9    0003     75 90 55              	MOV	P1,#55H
     10    0006     75 A0 01              	MOV	P2,#1
     11    0009     75 B0 01              	MOV	P3,#1
     12    000C                           LOOP:
     13    000C     05 80                 	INC	P0          ; P0當二進制計數器
     14    000E                           
     15    000E     E5 90                 	MOV	A,P1        ; P1 0x55/0xaa交互變化
     16    0010     B4 55 05              	CJNE	A,#55H,FILL55H
     17    0013     75 90 AA              	MOV	P1,#0AAH
     18    0016     01 1B                 	AJMP	NEXT1
     19    0018                           FILL55H:
     20    0018     75 90 55              	MOV	P1,#055H
     21    001B                           NEXT1:
     22    001B                           
     23    001B     E5 A0                 	MOV	A,P2        ;P2左旋
     24    001D     23                    	RL	A
     25    001E     F5 A0                 	MOV	P2,A
     26    0020                           
     27    0020     E5 B0                 	MOV	A,P3        ;P3右旋
     28    0022     03                    	RR	A
     29    0023     F5 B0                 	MOV	P3,A
     30    0025                           
     31    0025     11 44                 	ACALL	DELAY100MS
     32    0027     80 E3                 	SJMP	LOOP
     33    0029                           
     34    0029                           	include delay.inc
I1    1    0029                            include SDelay.inc
I2    1    0029                           ; Simulator 專用副程式
I2    2    0029                           ; 進入專用副程式後, 禁止所有中斷,計時器等工作,
I2    3    0029                           ; CPU處閒置狀態直到等待時間到達,才離開專用副程式. 
I2    4    0029                           DELAY100US:
I2    5    0029     74 01                 	MOV	A,#01;
I2    6    002B     D2 D5                 	SETB	F0
I2    7    002D     D2 D5                 	SETB	F0
I2    8    002F     D2 D5                 	SETB	F0
I2    9    0031     22                    	RET
I2   10    0032                           DELAY1MS:
I2   11    0032     74 02                 	MOV	A,#02;
I2   12    0034     D2 D5                 	SETB	F0
I2   13    0036     D2 D5                 	SETB	F0
I2   14    0038     D2 D5                 	SETB	F0
I2   15    003A     22                    	RET
I2   16    003B                           DELAY10MS:
I2   17    003B     74 03                 	MOV	A,#03;
I2   18    003D     D2 D5                 	SETB	F0
I2   19    003F     D2 D5                 	SETB	F0
I2   20    0041     D2 D5                 	SETB	F0
I2   21    0043     22                    	RET
I2   22    0044                           DELAY100MS:
I2   23    0044     74 04                 	MOV	A,#04;
I2   24    0046     D2 D5                 	SETB	F0
I2   25    0048     D2 D5                 	SETB	F0
I2   26    004A     D2 D5                 	SETB	F0
I2   27    004C     22                    	RET
I2   28    004D                           DELAY1S:
I2   29    004D     74 05                 	MOV	A,#05;
I2   30    004F     D2 D5                 	SETB	F0
I2   31    0051     D2 D5                 	SETB	F0
I2   32    0053     D2 D5                 	SETB	F0
I2   33    0055     22                    	RET
I2   34    0056                           DELAY10S:
I2   35    0056     74 06                 	MOV	A,#06;
I2   36    0058     D2 D5                 	SETB	F0
I2   37    005A     D2 D5                 	SETB	F0
I2   38    005C     D2 D5                 	SETB	F0
I2   39    005E     22                    	RET
I2   40    005F                           DELAY100S:
I2   41    005F     74 07                 	MOV	A,#07;
I2   42    0061     D2 D5                 	SETB	F0
I2   43    0063     D2 D5                 	SETB	F0
I2   44    0065     D2 D5                 	SETB	F0
I2   45    0067     22                    	RET
I2   46    0068                           DELAY100USP:
I2   47    0068     D2 D5                 	SETB	F0
I2   48    006A     D2 D5                 	SETB	F0
I2   49    006C     D2 D5                 	SETB	F0
I2   50    006E     22                    	RET
I1    2    006F                           
     35    006F                           
     36    006F                           
     37    006F                           	END
