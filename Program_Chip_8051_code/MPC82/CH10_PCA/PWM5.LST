C51 COMPILER V9.03   PWM5                                                                  11/27/2011 15:54:26 PAGE 1   


C51 COMPILER V9.03, COMPILATION OF MODULE PWM5
OBJECT MODULE PLACED IN PWM5.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE PWM5.c OPTIMIZE(2,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********* PWM5.C *******PCA計數PWM直流馬達控制實習**********
   2          *動作：由CEX1(P13)輸出PWM控制直流馬達轉速及P12控制正反轉
   3          *硬體：SW2-7(DIR)及SW2-8(PWM)ON,或SW1-4(P1LED)ON
   4          *****************************************************/
   5          #include "..\MPC82.H" 
   6          sbit DIR=P1^2; //0=馬達正轉,1=馬達反轉
   7          void main()       
   8          {
   9   1          unsigned char i;
  10   1          P1M0=0; P1M1=0x06; //設定(P13-2)為推挽式輸出(M0-1=01)
  11   1              CCAPM1=ECOM+PWM; //致能CEX1比較器及PWM輸出
  12   1          CMOD=0x00; //CPS1-0=00,Fpwm=Fosc/12/256=22.1184MHz/12/256=7.2KHz
  13   1              CR=1;      //開始PCA計數
  14   1              DIR=0;     //0=馬達正轉
  15   1              while(1)   //重覆輸出PWM波形
  16   1          {
  17   2                for(i=0;i<255;i++)//低電位比率漸漸增加，LED漸亮，馬達加速
  18   2                 {
  19   3                  CCAP1H=i; //設定CEX1脈波時間
  20   3                  Delay_ms(30);
  21   3                 }
  22   2                for(i=255;i>0;i--)//低電位比率漸漸減少，LED漸暗，馬達減速
  23   2                 {
  24   3                  CCAP1H=i; //設定CEX1脈波時間
  25   3                  Delay_ms(30);
  26   3                 }
  27   2               DIR=!DIR;//切換馬達正/反轉
  28   2              }        
  29   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    114    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
